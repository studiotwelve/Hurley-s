(function(a,b,c){function r(a,b,c){var d;if(c<0){c+=1}else if(c>1){c-=1}if(6*c<1){d=a+(b-a)*c*6}else if(2*c<1){d=b}else if(3*c<2){d=a+(b-a)*(2/3-c)*6}else{d=a}return 255*d}function q(a,b,c){var d,e,f,g,h,i;b/=100;c/=100;if(b===0){g=h=i=c*255}else{if(c<=.5){e=c*(b+1)}else{e=c+b-c*b}d=c*2-e;f=a/360;g=r(d,e,f+1/3);h=r(d,e,f);i=r(d,e,f-1/3)}return[g,h,i]}function p(a){var b=e.exec(a);if(b){return b[5]!==c?b[5]:1}return 1}function o(a){var b=e.exec(a),c;if(b&&b[1]==="hsl"){c=q(b[2],b[3],b[4]);b[2]=c[0];b[3]=c[1];b[4]=c[2]}return b?"#"+(1<<24|b[2]<<16|b[3]<<8|b[4]).toString(16).substr(1):a}function n(b,e,g){e.each(function(){var h=this,i=g||b[0].currentStyle["text-shadow"];e=a(h);if(!i||i==="none"){return true}var j=d.exec(i),k,l,m,n,q;k=parseFloat(j[1]);l=parseFloat(j[2]);m=j[3]!==c?parseFloat(j[3]):0;n=j[4]!==c?o(j[4]):"inherit";q=p(j[4]);e.css({color:n,left:k-m+"px",top:l-m+"px"});h.style.filter=[f+"Alpha(","opacity="+parseInt(q*100,10),") ",f+"Blur(","pixelRadius="+m,")"].join("")})}function m(a){if(!a.length){return null}var b=j.cloneNode(),c=k.cloneNode(),d=l.cloneNode();b.appendChild(c);b.appendChild(d);c.appendChild(document.createTextNode(a));d.appendChild(document.createTextNode(a));return b}function i(b){var c=b.nodeValue,d=c.split(/\s/),e,f=0,h,i;if(!c){return}var j=document.createDocumentFragment();a.each(d,function(){e=this.length;if(!e){return true}g.lastIndex=f+e;h=g.exec(c);i=m(c.substr(f,e+h[1].length));if(i!==null){j.appendChild(i)}f=f+e+h[1].length});b.parentNode.replaceChild(j.cloneNode(true),b)}function h(b){a(b).contents().each(function(){if(this.nodeType===3&&this.data){i(this);return true}var b=a(this);if(this.nodeType===1&&(!b.hasClass("ui-text-shadow")||!b.hasClass("ui-text-shadow-original")||!b.hasClass("ui-text-shadow-copy"))){h(this);return true}})}var d=/([\d+.\-]+[a-z%]*)\s*([\d+.\-]+[a-z%]*)\s*([\d+.\-]+[a-z%]*)?\s*([#a-z]*.*)?/,e=/(rgb|hsl)a?\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?(?:\s*,\s*([\.\d]+))?/,f="progid:DXImageTransform.Microsoft.",g=/(\s*)/g;a.fn.textshadow=function(b,c){if(typeof b==="object"&&!c){c=b;b=null}var d=c||{};var e=d.useStyle||false;return this.each(function(){var c=a(this),d;d=c.find(".ui-text-shadow-copy");if(!d.length){h(this);d=c.find(".ui-text-shadow-copy")}if(e){n(c,d,b)}})};var j=a('<span class="ui-text-shadow" />')[0],k=a('<span class="ui-text-shadow-original" />')[0],l=a('<span class="ui-text-shadow-copy" />')[0]})(jQuery,this)